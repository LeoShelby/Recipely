<!-- menu dropdown delle notifiche -->

<div class="btn-group dropdown dropdown-notifications sw-open">
  <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
	  
	<i data-count= <%= current_user.notifications.where(read: false).count %>   class="glyphicon glyphicon-bell notification-icon"></i>
	
	<span class="caret"></span>
  </button>

  <div class="dropdown-container">
	   <div class="dropdown-toolbar">
		  <div class="dropdown-toolbar-actions">
			<a href="#"><i class="glyphicon glyphicon-search"></i> <%= link_to "View All" , notifications_path %></a>
		  </div>
			<h3 class="dropdown-toolbar-title"><%= current_user.notifications.where(read: false).count %> Unread Notifications </h3>
		</div><!-- /dropdown-toolbar -->

		<ul class="dropdown-menu notifications">
			<% current_user.notifications.order('created_at DESC').where(read: false).each do |notif| %>   <!-- mostro le notifiche in ordine temporale decrescente e solo quelle non lette -->
			
				<%= link_to link_through_path(notif) do %>     <!-- tutta la notifica è cliccabile e ti reindirizza al profilo che ti segue -->
					<!-- il link è reindirizzato sull'azione del controller che rende la notifica non letta, tale azione ti reindirizza alla pagina della notifica -->
					<ul class="notifications">
						  <li class="notification">
							  <div class="media">
								<div class="media-left">
								  <div class="media-object">
									<img class="img-circle"> <%= gravatar_for notif.notified_by, size: 50 %> </img>
								  </div>
								</div>
								<div class="media-body">
								  <strong class="notification-title"><font color="#0000FF"><%= notif.notified_by.name %> </font> started to follow you </strong>  <!-- da mofidicare quando avremo altri tipi di notifiche -->
									  <div class="notification-meta">
									<small class="timestamp"> <%= notif.created_at %> </small>   <!-- quando è arrivata la notifica -->
								  </div>
								</div>
							  </div>
						  </li>
					</ul>
				<% end %>  <!-- end del link_to -->
		   
			<% end %>  <!-- end del ciclo sulle notifiche -->
			
		</ul>
	</div>
</div>
